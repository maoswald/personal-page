<header class="site-header" role="banner">
  <div class="container">
    <a class="logo" href="{{ "/" | relLangURL }}">{{ site.Params.siteTitle }}</a>
    <nav class="nav-main" aria-label="Primary">
      {{ range .Site.Menus.main }}
        <a href="{{ .URL }}" {{ if $.IsMenuCurrent "main" . }}aria-current="page"{{ end }}>{{ .Name }}</a>
      {{ end }}
    </nav>
    <div class="header-actions">
      <div class="language-switcher" role="navigation" aria-label="Language selector">
        {{ $current := . }}
        {{ range .Site.Languages }}
          {{ $lang := . }}
          {{ if eq $current.Lang $lang.Lang }}
            <span class="active">{{ $lang.LanguageName }}</span>
          {{ else }}
            {{ $translations := where $current.AllTranslations "Lang" $lang.Lang }}
            {{ if gt (len $translations) 0 }}
              {{ with index $translations 0 }}<a href="{{ .RelPermalink }}">{{ $lang.LanguageName }}</a>{{ end }}
            {{ else }}
              <a href="{{ (printf "/%s/" $lang.Lang) | relLangURL }}">{{ $lang.LanguageName }}</a>
            {{ end }}
          {{ end }}
        {{ end }}
      </div>
    </div>
  </div>
</header>
